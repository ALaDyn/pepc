 #
#  Makefile for pepc
#
SION = @SION@

.PHONY : lpepc pepcb pepce

all: lpepc pepcb pepce

# PEPC kernel library routines (tree code)
lpepc:  
	cd lpepcsrc && gmake

# Laser-plasma front-end
pepcb: 
	cd lpepcsrc && gmake 
ifeq ($(SION),1)
	cd third_party/sionlib/src && gmake
endif	
	cd pepc-b && gmake

# pepc-b front-end with visit interface routines
# need --with-visit to activate visit libraries
# need --with-netcdf to activate netcdf output (via interface routines)
pepcb-vis:
	cd lpepcsrc && gmake
	cd pepc-b && gmake pepc-visit

# Debug mode
debug:
	cd lpepcsrc && gmake
	cd pepc-b && gmake debug

# MD standalone front end
# uses fields instead of fields_p
pepce:
	cd lpepcsrc && gmake
	cd pepc-e && gmake

pepce-vis:
	cd lpepcsrc && gmake
	cd pepc-e && gmake pepc-visit

clean:
	cd lpepcsrc && gmake clean && cd ..
ifeq ($(SION),1)
	cd third_party/sionlib/src && gmake clean
endif	
	cd pepc-b && gmake clean
	cd pepc-e && gmake clean

cleanb:
	cd pepc-b && gmake clean && cd ..

cleane:
	cd pepc-e && gmake clean && cd ..

cleanvis:
	cd pepc-b && gmake cleanvis && cd ..
