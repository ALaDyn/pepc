<!--
    PRACE BENCHMARK SUITE

    JuBE benchmark configuration schemata for: PEPC

    Contact: l.arnold@fz-juelich.de
-->
<!--
   Choose one of the platforms defined in the toplevel platform.xml

    wscheme (walk_scheme) -> 0 (isend/irecv) or 1(coll)
    nt                    -> number of timesteps
    npart                 -> number of particles (ions)
-->

<bench name = "PEPC"   platform = "Cray-XT4-Jaguar">

<!-- ********************************************************** -->

<benchmark name="test2" active="1">
    <!-- version="reuse|new" -->
    <compile     cname = "$platform"   version="new" skin="$SCALASCA" />

    <tasks       threadspertask = "1"   taskspernode = "4"   nodes = "32" />

    <params      COMMENT       = "test compilation and scalasca on jaguar"
                 PERL_CMD      = "perl"
                 optflags      = "-O3 -Minfo -Minline=name:key2addr -Minline=name:mac_choose"

                 GPROF         = "off"

		 SCALASCA      = "on"

		 npart         = "1000000" 
                 nt            = "20" 
	         wscheme       = "0"
		 fetchmult     = "3"
		 npmult        = "`int(min(-530/$ncpus*10.0-1.0,-10))`" /> 

    <prepare     cname = "PEPC_sphere" />

    <execution   iteration = "1"     cname      = "$platform"  
                 datalimit = "700"   stacklimit = "0" />

    <verify      cname="PEPC" />
    <analyse     cname="$platform" /> 

</benchmark>

<benchmark name="test" active="0">
    <!-- version="reuse|new" -->
    <compile     cname = "$platform"   version="reuse" />

    <tasks       threadspertask = "1"   taskspernode = "4"   nodes = "32" />

    <params      COMMENT       = "test compilation on jaguar"
                 PERL_CMD      = "perl"
                 optflags      = "-O3"

                 GPROF         = "off"

		 SCALASCA      = "off"

		 npart         = "100000" 
                 nt            = "20" 
	         wscheme       = "0"
		 fetchmult     = "3"
		 npmult        = "`int(min(-530/$ncpus*10.0-1.0,-10))`" /> 

    <prepare     cname = "PEPC_sphere" />

    <execution   iteration = "1"     cname      = "$platform"  
                 datalimit = "700"   stacklimit = "0" />

    <verify      cname="PEPC" />
    <analyse     cname="$platform" /> 

</benchmark>

<!-- ********************************************************** -->

</bench>




