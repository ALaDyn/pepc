<!--
    JuBE benchmark configuration schemata for: PEPC

    Contact: l.arnold@fz-juelich.de
-->
<!--
   Choose one of the platforms defined in the toplevel platform.xml

   GNU-Linux

    wscheme (walk_scheme) -> 0 (isend/irecv) or 1(coll)
    nt                    -> number of timesteps
    npart                 -> number of particles (ions)
    geom                  -> 3 (homogeneous); 6/7 (one/two spheres)

-->
<bench name="PEPC" platform="GNU-Linux" >

<!-- ********************************************************** -->

<benchmark name="test_and_verify" active="1">
    <!-- version="reuse|new" -->
    <compile     cname           = "$platform"   
                 version         = "new"
 
                 CMP_OPT         = "`{$a = '$optflags'; $a =~ s/[ ]//g; $a}`"
                 CMP_GPROF       = "$GPROF" 
                 CMP_SCALASCA    = "$SCALASCA"/>

    <tasks       threadspertask = "1"   taskspernode = "4"   nodes = "1" />

    <params      COMMENT       = "scaling test"
                 PERL_CMD      = "perl"
                 optflags      = "-O3"

                 writemode     = "binary"
                 
                 GPROF         = "off"

                 SCALASCA      = "off"

                 npart         = "1000017" 
                 geom          = "1,2,3"
                 nt            = "50" 
                 wscheme       = "1"
                 cscheme       = "0"
                 csort         = "3"
                 npmult        = "-200" /> 

    <prepare     cname = "PEPC" />

    <execution   iteration = "1"   cname   = "$platform"/>

    <verify      cname="PEPC" />
    <analyse     cname="$platform" /> 

</benchmark>

<!-- ********************************************************** -->

<benchmark name="periodic_test" active="1">
    <!-- version="reuse|new" -->
    <compile     cname           = "$platform"   
                 version         = "new"
 
                 CMP_OPT         = "`{$a = '$optflags'; $a =~ s/[ ]//g; $a}`"
                 CMP_GPROF       = "$GPROF" 
                 CMP_SCALASCA    = "$SCALASCA"/>

    <tasks       threadspertask = "1"   taskspernode = "2"   nodes = "1" />

    <params      COMMENT       = "periodic test"
                 PERL_CMD      = "perl"
                 optflags      = "-O3"

                 writemode     = "binary"
                 
                 GPROF         = "off"

                 SCALASCA      = "off"

                 npart         = "4" 
                 geom          = "7"
                 nt            = "1" 
                 wscheme       = "1"
                 cscheme       = "0"
                 csort         = "3"
                 npmult        = "-200" /> 

    <prepare     cname = "PEPC-periodic" />

    <execution   iteration = "1"   
                 cname   = "$platform"/>

    <verify      cname="PEPC-periodic" />
    <analyse     cname="$platform" /> 

</benchmark>

<!-- ********************************************************** -->

</bench>




